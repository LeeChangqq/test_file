<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<form action="/save" method="post" enctype="multipart/form-data">
    <input type="file" id="file-input" name="imageFile" multiple />
    <div id="preview">
    </div>
    <input type="submit" value="버튼">
</form>
<input type="file" id="file-input1"  onchange="a()" multiple />
</body>
<script>


    // const handler = {
    //     init() {
    //         const fileInput = document.querySelector('#file-input1');
    //         const preview = document.querySelector('#preview');
    //         fileInput.addEventListener('change', () => {
    //             console.dir(fileInput)
    //             const files = Array.from(fileInput.files)
    //             files.forEach(file => {
    //                 preview.innerHTML += `
    //                     <p id="${file.lastModified}">
    //                         ${file.name}
    //                         <button data-index='${file.lastModified}' class='file-remove'>X</button>
    //                     </p>`;
    //             });
    //         });
    //     },
    //
    //     removeFile: () => {
    //         document.addEventListener('click', (e) => {
    //             console.log(e);
    //             if(e.target.className !== 'file-remove') return;
    //             // const removeTargetId = e.target.dataset.index;
    //             // const removeTarget = document.getElementById(removeTargetId);
    //             const files = document.querySelector('#file-input').files;
    //             const files1 = document.querySelector('#file-input1').files;
    //             const dataTranster = new DataTransfer();
    //
    //             // document.querySelector('#file-input').files =
    //             //             Array.from(files).filter(file => file.lastModified !== removeTarget);
    //
    //
    //             Array.from(files1)
    //                 // .filter(file => file.lastModified != removeTargetId)
    //                 .forEach(file => {
    //                     dataTranster.items.add(file);
    //                 });
    //
    //             document.querySelector('#file-input').files = dataTranster.files;
    //
    //             removeTarget.remove();
    //         })
    //     }
    // }
    //
    // handler.init()
    // handler.removeFile()

    function p () {
        const files1 = document.querySelector('#file-input1').files;
        const files = document.querySelector('#file-input').files;
        const dataTranster = new DataTransfer();
        Array.from(files)
            // .filter(file => file.lastModified != removeTargetId)
            .forEach(file => {
                dataTranster.items.add(file);
            });
        Array.from(files1)
            // .filter(file => file.lastModified != removeTargetId)
            .forEach(file => {
                dataTranster.items.add(file);
            });
        document.querySelector('#file-input').files = dataTranster.files;
    }
</script>
</html>